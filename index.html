<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    CUACA : <p id="lokasi"></p>
    <hr>
    <!-- Tambahkan di atas tag <script> utama -->
<div style="margin-bottom:10px;">
  <input id="q" type="text" placeholder="Masukkan nama kota (misal: Bandung)">
  <button id="btn">Cari</button>
</div>

<!-- Update script jadi fungsi pencarian -->
<script>
  const API_KEY = "5c17df9cdb59443894363944250810";

  function search(q){
    const urlapi = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${encodeURIComponent(q)}&aqi=no`;
    $.ajax({
      url: urlapi,
      method: "GET",
      success: function(data){
        const v = document.getElementById("tampilan");
        const l = document.getElementById("lokasi");

        let suhu = data.current.temp_c;
        let lokasi = data.location.name;

        v.innerHTML = suhu + "Â°C";
        l.innerHTML = lokasi;
      },
      error: function(err){
        console.log(err);
        alert("Gagal mengambil data cuaca. Periksa nama lokasi.");
      }
    });
  }

  // default load Yogyakarta
  search("Yogyakarta");

  // event handler
  document.getElementById("btn").addEventListener("click", function(){
    const query = document.getElementById("q").value;
    search(query);
  });
</script>


</body>
</html>
