<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    CUACA : <p id="lokasi"></p>
    <hr>
    <!-- Tambahkan di atas tag <script> utama -->
<div style="margin-bottom:10px;">
  <input id="q" type="text" placeholder="Masukkan nama kota (misal: Bandung)">
  <button id="btn">Cari</button>
</div>

<!-- Update script jadi fungsi pencarian -->
<script>
  const API_KEY = "5c17df9cdb59443894363944250810";

  function search(q){
    const urlapi = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${encodeURIComponent(q)}&aqi=no`;
    $.ajax({
      url: urlapi,
      method: "GET",
      <!-- Ubah isi success callback -->
success: function(data){
  const v = document.getElementById("tampilan");
  const l = document.getElementById("lokasi");

  const suhu = data.current.temp_c;
  const lokasi = data.location.name;
  const negara = data.location.country;
  const region = data.location.region;
  const lat = data.location.lat;
  const lon = data.location.lon;

  v.innerHTML = `
    <h3>${lokasi}</h3>
    <p>Suhu: ${suhu}Â°C</p>
    <p>Negara: ${negara}</p>
    <p>Provinsi: ${region}</p>
    <p>Latitude: ${lat}</p>
    <p>Longitude: ${lon}</p>
  `;

  l.innerHTML = lokasi;
}
,
      error: function(err){
        console.log(err);
        alert("Gagal mengambil data cuaca. Periksa nama lokasi.");
      }
    });
  }

  // default load Yogyakarta
  search("Yogyakarta");

  // event handler
  document.getElementById("btn").addEventListener("click", function(){
    const query = document.getElementById("q").value;
    search(query);
  });
</script>


</body>
</html>
