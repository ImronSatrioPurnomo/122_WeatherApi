<!DOCTYPE html>
<html lang="en">
<head>
    <style>
  body { font-family: Arial, sans-serif; background: #f7f7f8; padding: 30px; }
  .card {
    background: white; padding: 20px; border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-width: 500px; margin: auto;
  }
  input, button {
    padding: 10px; font-size: 16px; border-radius: 8px; border: 1px solid #ccc;
  }
  button {
    background: #111; color: white; cursor: pointer;
  }
  .loading { color: #555; font-style: italic; }
  .error { color: red; font-weight: bold; }
</style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    CUACA : <p id="lokasi"></p>
    <hr>
    <!-- Tambahkan di atas tag <script> utama -->
<div style="margin-bottom:10px;">
  <input id="q" type="text" placeholder="Masukkan nama kota (misal: Bandung)">
  <button id="btn">Cari</button>
</div>

<!-- Update script jadi fungsi pencarian -->
<script>
  const API_KEY = "5c17df9cdb59443894363944250810";
  const v = document.getElementById("tampilan");

  function renderLoading(){
    v.innerHTML = `<p class="loading">Mengambil data cuaca...</p>`;
  }

  function renderError(msg){
    v.innerHTML = `<p class="error">${msg}</p>`;
  }

  function search(q){
    if(!q.trim()) return renderError("Masukkan nama kota!");
    renderLoading();
    const url = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${encodeURIComponent(q)}&aqi=no`;

    $.ajax({
      url: url,
      method: "GET",
      success: function(data){
        const suhu = data.current.temp_c;
        const lokasi = data.location.name;
        const negara = data.location.country;
        const region = data.location.region;
        const lat = data.location.lat;
        const lon = data.location.lon;

        v.innerHTML = `
          <div class="card">
            <h2>${lokasi}</h2>
            <h3>${suhu}Â°C</h3>
            <p>Negara: ${negara}</p>
            <p>Provinsi: ${region}</p>
            <p>Latitude: ${lat}</p>
            <p>Longitude: ${lon}</p>
          </div>
        `;
      },
      error: function(){
        renderError("Gagal memuat data. Coba periksa koneksi atau nama kota.");
      }
    });
  }

  // Default
  search("Yogyakarta");

  // Event
  document.getElementById("btn").addEventListener("click", function(){
    const query = document.getElementById("q").value;
    search(query);
  });
</script>


</body>
</html>
